{"version":3,"sources":["change_detection_jit_generator.es6","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/25"],"names":[],"mappings":"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","file":"/Users/crush/Documents/learning_js/angular/modules/angular2/src/change_detection/change_detection_jit_generator.es6","sourceRoot":"/Users/crush/Documents/learning_js/angular/modules/angular2/src/change_detection/","sourcesContent":["import {isPresent, isBlank, BaseException, Type} from 'angular2/src/facade/lang';\nimport {List, ListWrapper, MapWrapper, StringMapWrapper} from 'angular2/src/facade/collection';\n\nimport {ContextWithVariableBindings} from './parser/context_with_variable_bindings';\nimport {AbstractChangeDetector} from './abstract_change_detector';\nimport {ChangeDetectionUtil} from './change_detection_util';\n\nimport {\n  ProtoRecord,\n  RECORD_TYPE_SELF,\n  RECORD_TYPE_PROPERTY,\n  RECORD_TYPE_INVOKE_METHOD,\n  RECORD_TYPE_CONST,\n  RECORD_TYPE_INVOKE_CLOSURE,\n  RECORD_TYPE_PRIMITIVE_OP,\n  RECORD_TYPE_KEYED_ACCESS,\n  RECORD_TYPE_PIPE,\n  RECORD_TYPE_INTERPOLATE\n  } from './proto_record';\n\n/**\n * The code generator takes a list of proto records and creates a function/class\n * that \"emulates\" what the developer would write by hand to implement the same\n * kind of behaviour.\n *\n * For example: An expression `address.city` will result in the following class:\n *\n * var ChangeDetector0 = function ChangeDetector0(dispatcher, protos) {\n *   AbstractChangeDetector.call(this);\n *   this.dispatcher = dispatcher;\n *   this.protos = protos;\n *\n *   this.context = ChangeDetectionUtil.unitialized();\n *   this.address0 = ChangeDetectionUtil.unitialized();\n *   this.city1 = ChangeDetectionUtil.unitialized();\n * }\n * ChangeDetector0.prototype = Object.create(AbstractChangeDetector.prototype);\n *\n * ChangeDetector0.prototype.detectChangesInRecords = function(throwOnChange) {\n *   var address0;\n *   var city1;\n *   var change;\n *   var changes = null;\n *   var temp;\n *   var context = this.context;\n *\n *   temp = ChangeDetectionUtil.findContext(\"address\", context);\n *   if (temp instanceof ContextWithVariableBindings) {\n *     address0 = temp.get('address');\n *   } else {\n *     address0 = temp.address;\n *   }\n *\n *   if (address0 !== this.address0) {\n *     this.address0 = address0;\n *   }\n *\n *   city1 = address0.city;\n *   if (city1 !== this.city1) {\n *     changes = ChangeDetectionUtil.addRecord(changes,\n *       ChangeDetectionUtil.simpleChangeRecord(this.protos[1].bindingMemento, this.city1, city1));\n *     this.city1 = city1;\n *   }\n *\n *   if (changes.length > 0) {\n *     if(throwOnChange) ChangeDetectionUtil.throwOnChange(this.protos[1], changes[0]);\n *     this.dispatcher.onRecordChange('address.city', changes);\n *     changes = null;\n *   }\n * }\n *\n *\n * ChangeDetector0.prototype.hydrate = function(context) {\n *   this.context = context;\n * }\n *\n * ChangeDetector0.prototype.dehydrate = function(context) {\n *   this.context = ChangeDetectionUtil.unitialized();\n *   this.address0 = ChangeDetectionUtil.unitialized();\n *   this.city1 = ChangeDetectionUtil.unitialized();\n * }\n *\n * ChangeDetector0.prototype.hydrated = function() {\n *   return this.context !== ChangeDetectionUtil.unitialized();\n * }\n *\n * return ChangeDetector0;\n *\n *\n * The only thing the generated class depends on is the super class AbstractChangeDetector.\n *\n * The implementation comprises two parts:\n * * ChangeDetectorJITGenerator has the logic of how everything fits together.\n * * template functions (e.g., constructorTemplate) define what code is generated.\n*/\n\nvar ABSTRACT_CHANGE_DETECTOR = \"AbstractChangeDetector\";\nvar UTIL = \"ChangeDetectionUtil\";\nvar DISPATCHER_ACCESSOR = \"this.dispatcher\";\nvar PIPE_REGISTRY_ACCESSOR = \"this.pipeRegistry\";\nvar PROTOS_ACCESSOR = \"this.protos\";\nvar CHANGE_LOCAL = \"change\";\nvar CHANGES_LOCAL = \"changes\";\nvar TEMP_LOCAL = \"temp\";\n\nfunction typeTemplate(type:string, cons:string, detectChanges:string, setContext:string):string {\n  return `\n${cons}\n${detectChanges}\n${setContext};\n\nreturn function(dispatcher, pipeRegistry) {\n  return new ${type}(dispatcher, pipeRegistry, protos);\n}\n`;\n}\n\nfunction constructorTemplate(type:string, fieldsDefinitions:string):string {\n  return `\nvar ${type} = function ${type}(dispatcher, pipeRegistry, protos) {\n${ABSTRACT_CHANGE_DETECTOR}.call(this);\n${DISPATCHER_ACCESSOR} = dispatcher;\n${PIPE_REGISTRY_ACCESSOR} = pipeRegistry;\n${PROTOS_ACCESSOR} = protos;\n${fieldsDefinitions}\n}\n\n${type}.prototype = Object.create(${ABSTRACT_CHANGE_DETECTOR}.prototype);\n`;\n}\n\nfunction pipeOnDestroyTemplate(pipeNames:List) {\n  return pipeNames.map((p) => `${p}.onDestroy()`).join(\"\\n\");\n}\n\nfunction hydrateTemplate(type:string, fieldsDefinitions:string, pipeOnDestroy:string):string {\n  return `\n${type}.prototype.hydrate = function(context) {\n  this.context = context;\n}\n${type}.prototype.dehydrate = function() {\n  ${pipeOnDestroy}\n  ${fieldsDefinitions}\n}\n${type}.prototype.hydrated = function() {\n  return this.context !== ${UTIL}.unitialized();\n}\n`;\n}\n\nfunction detectChangesTemplate(type:string, body:string):string {\n  return `\n${type}.prototype.detectChangesInRecords = function(throwOnChange) {\n  ${body}\n}\n`;\n}\n\n\nfunction bodyTemplate(localDefinitions:string, changeDefinitions:string, records:string):string {\n  return `\n${localDefinitions}\n${changeDefinitions}\nvar ${TEMP_LOCAL};\nvar ${CHANGE_LOCAL};\nvar ${CHANGES_LOCAL} = null;\n\ncontext = this.context;\n${records}\n`;\n}\n\nfunction notifyTemplate(index:number):string{\n  return  `\nif (${CHANGES_LOCAL} && ${CHANGES_LOCAL}.length > 0) {\n  if(throwOnChange) ${UTIL}.throwOnChange(${PROTOS_ACCESSOR}[${index}], ${CHANGES_LOCAL}[0]);\n  ${DISPATCHER_ACCESSOR}.onRecordChange(${PROTOS_ACCESSOR}[${index}].directiveMemento, ${CHANGES_LOCAL});\n  ${CHANGES_LOCAL} = null;\n}\n`;\n}\n\nfunction pipeCheckTemplate(context:string, pipe:string, pipeType:string,\n                                  value:string, change:string, addRecord:string, notify:string):string{\n  return `\nif (${pipe} === ${UTIL}.unitialized()) {\n  ${pipe} = ${PIPE_REGISTRY_ACCESSOR}.get('${pipeType}', ${context});\n} else if (!${pipe}.supports(${context})) {\n  ${pipe}.onDestroy();\n  ${pipe} = ${PIPE_REGISTRY_ACCESSOR}.get('${pipeType}', ${context});\n}\n\n${CHANGE_LOCAL} = ${pipe}.transform(${context});\nif (! ${UTIL}.noChangeMarker(${CHANGE_LOCAL})) {\n  ${value} = ${CHANGE_LOCAL};\n  ${change} = true;\n  ${addRecord}\n}\n${notify}\n`;\n}\n\nfunction referenceCheckTemplate(assignment, newValue, oldValue, change, addRecord, notify) {\n  return `\n${assignment}\nif (${newValue} !== ${oldValue} || (${newValue} !== ${newValue}) && (${oldValue} !== ${oldValue})) {\n  ${change} = true;\n  ${addRecord}\n  ${oldValue} = ${newValue};\n}\n${notify}\n`;\n}\n\nfunction assignmentTemplate(field:string, value:string) {\n  return `${field} = ${value};`;\n}\n\nfunction propertyReadTemplate(name:string, context:string, newValue:string) {\n  return `\n${TEMP_LOCAL} = ${UTIL}.findContext(\"${name}\", ${context});\nif (${TEMP_LOCAL} instanceof ContextWithVariableBindings) {\n  ${newValue} = ${TEMP_LOCAL}.get('${name}');\n} else {\n  ${newValue} = ${TEMP_LOCAL}.${name};\n}\n`;\n}\n\nfunction invokeMethodTemplate(name:string, args:string, context:string, newValue:string) {\n  return `\n${TEMP_LOCAL} = ${UTIL}.findContext(\"${name}\", ${context});\nif (${TEMP_LOCAL} instanceof ContextWithVariableBindings) {\n  ${newValue} = ${TEMP_LOCAL}.get('${name}').apply(null, [${args}]);\n} else {\n  ${newValue} = ${context}.${name}(${args});\n}\n`;\n}\n\nfunction localDefinitionsTemplate(names:List):string {\n  return names.map((n) => `var ${n};`).join(\"\\n\");\n}\n\nfunction changeDefinitionsTemplate(names:List):string {\n  return names.map((n) => `var ${n} = false;`).join(\"\\n\");\n}\n\nfunction fieldDefinitionsTemplate(names:List):string {\n  return names.map((n) => `${n} = ${UTIL}.unitialized();`).join(\"\\n\");\n}\n\nfunction ifChangedGuardTemplate(changeNames:List, body:string):string {\n  var cond = changeNames.join(\" || \");\n  return `\nif (${cond}) {\n  ${body}\n}\n`;\n}\n\nfunction addSimpleChangeRecordTemplate(protoIndex:number, oldValue:string, newValue:string) {\n  return `${CHANGES_LOCAL} = ${UTIL}.addRecord(${CHANGES_LOCAL},\n    ${UTIL}.simpleChangeRecord(${PROTOS_ACCESSOR}[${protoIndex}].bindingMemento, ${oldValue}, ${newValue}));`;\n}\n\n\nexport class ChangeDetectorJITGenerator {\n  typeName:string;\n  records:List<ProtoRecord>;\n  localNames:List<String>;\n  changeNames:List<String>;\n  fieldNames:List<String>;\n  pipeNames:List<String>;\n\n  constructor(typeName:string, records:List<ProtoRecord>) {\n    this.typeName = typeName;\n    this.records = records;\n\n    this.localNames = this.getLocalNames(records);\n    this.changeNames = this.getChangeNames(this.localNames);\n    this.fieldNames = this.getFieldNames(this.localNames);\n    this.pipeNames = this.getPipeNames(this.localNames);\n  }\n\n  getLocalNames(records:List<ProtoRecord>):List<String> {\n    var index = 0;\n    var names = records.map((r) => {\n      var sanitizedName = r.name.replace(new RegExp(\"\\\\W\", \"g\"), '');\n      return `${sanitizedName}${index++}`\n    });\n    return [\"context\"].concat(names);\n  }\n\n  getChangeNames(localNames:List<String>):List<String> {\n    return localNames.map((n) => `change_${n}`);\n  }\n\n  getFieldNames(localNames:List<String>):List<String> {\n    return localNames.map((n) => `this.${n}`);\n  }\n\n  getPipeNames(localNames:List<String>):List<String> {\n    return localNames.map((n) => `this.${n}_pipe`);\n  }\n\n  generate():Function {\n    var text = typeTemplate(this.typeName, this.genConstructor(), this.genDetectChanges(), this.genHydrate());\n    return new Function('AbstractChangeDetector', 'ChangeDetectionUtil', 'ContextWithVariableBindings', 'protos', text)(AbstractChangeDetector, ChangeDetectionUtil, ContextWithVariableBindings, this.records);\n  }\n\n  genConstructor():string {\n    return constructorTemplate(this.typeName, this.genFieldDefinitions());\n  }\n\n  genHydrate():string {\n    return hydrateTemplate(this.typeName, this.genFieldDefinitions(),\n      pipeOnDestroyTemplate(this.getnonNullPipeNames()));\n  }\n\n  genFieldDefinitions() {\n    var fields = [];\n    fields = fields.concat(this.fieldNames);\n    fields = fields.concat(this.getnonNullPipeNames());\n    return fieldDefinitionsTemplate(fields);\n  }\n\n  getnonNullPipeNames():List<String> {\n    var pipes = [];\n    this.records.forEach((r) => {\n      if (r.mode === RECORD_TYPE_PIPE) {\n        pipes.push(this.pipeNames[r.selfIndex]);\n      }\n    });\n    return pipes;\n  }\n\n  genDetectChanges():string {\n    var body = this.genBody();\n    return detectChangesTemplate(this.typeName, body);\n  }\n\n  genBody():string {\n    var rec = this.records.map((r) => this.genRecord(r)).join(\"\\n\");\n    return bodyTemplate(this.genLocalDefinitions(), this.genChangeDefinitions(), rec);\n  }\n\n  genLocalDefinitions():string {\n    return localDefinitionsTemplate(this.localNames);\n  }\n\n  genChangeDefinitions():string {\n    return changeDefinitionsTemplate(this.changeNames);\n  }\n\n  genRecord(r:ProtoRecord):string {\n    if (r.mode === RECORD_TYPE_PIPE) {\n      return this.genPipeCheck (r);\n    } else {\n      return this.genReferenceCheck(r);\n    }\n  }\n\n  genPipeCheck(r:ProtoRecord):string {\n    var context = this.localNames[r.contextIndex];\n    var pipe = this.pipeNames[r.selfIndex];\n    var newValue = this.localNames[r.selfIndex];\n    var oldValue = this.fieldNames[r.selfIndex];\n    var change = this.changeNames[r.selfIndex];\n\n    var addRecord = addSimpleChangeRecordTemplate(r.selfIndex - 1, oldValue, newValue);\n    var notify = this.genNotify(r);\n\n    return pipeCheckTemplate(context, pipe, r.name, newValue, change, addRecord, notify);\n  }\n\n  genReferenceCheck(r:ProtoRecord):string {\n    var newValue = this.localNames[r.selfIndex];\n    var oldValue = this.fieldNames[r.selfIndex];\n    var change = this.changeNames[r.selfIndex];\n    var assignment = this.genUpdateCurrentValue(r);\n    var addRecord = addSimpleChangeRecordTemplate(r.selfIndex - 1, oldValue, newValue);\n    var notify = this.genNotify(r);\n\n    var check = referenceCheckTemplate(assignment, newValue, oldValue, change, r.lastInBinding ? addRecord : '', notify);;\n    if (r.isPureFunction()) {\n      return this.ifChangedGuard(r, check);\n    } else {\n      return check;\n    }\n  }\n\n  genUpdateCurrentValue(r:ProtoRecord):string {\n    var context = this.localNames[r.contextIndex];\n    var newValue = this.localNames[r.selfIndex];\n    var args = this.genArgs(r);\n\n    switch (r.mode) {\n      case RECORD_TYPE_SELF:\n        return assignmentTemplate(newValue, context);\n\n      case RECORD_TYPE_CONST:\n        return `${newValue} = ${this.genLiteral(r.funcOrValue)}`;\n\n      case RECORD_TYPE_PROPERTY:\n        if (r.contextIndex == 0) { // only the first property read can be a local\n          return propertyReadTemplate(r.name, context, newValue);\n        } else {\n          return assignmentTemplate(newValue, `${context}.${r.name}`);\n        }\n\n      case RECORD_TYPE_INVOKE_METHOD:\n        if (r.contextIndex == 0) { // only the first property read can be a local\n          return invokeMethodTemplate(r.name, args, context, newValue);\n        } else {\n          return assignmentTemplate(newValue, `${context}.${r.name}(${args})`);\n        }\n\n      case RECORD_TYPE_INVOKE_CLOSURE:\n        return assignmentTemplate(newValue, `${context}(${args})`);\n\n      case RECORD_TYPE_PRIMITIVE_OP:\n        return assignmentTemplate(newValue, `${UTIL}.${r.name}(${args})`);\n\n      case RECORD_TYPE_INTERPOLATE:\n        return assignmentTemplate(newValue, this.genInterpolation(r));\n\n      case RECORD_TYPE_KEYED_ACCESS:\n        var key = this.localNames[r.args[0]];\n        return assignmentTemplate(newValue, `${context}[${key}]`);\n\n      default:\n        throw new BaseException(`Unknown operation ${r.mode}`);\n    }\n  }\n\n  ifChangedGuard(r:ProtoRecord, body:string):string {\n    return ifChangedGuardTemplate(r.args.map((a) => this.changeNames[a]), body);\n  }\n\n  genInterpolation(r:ProtoRecord):string{\n    var res = \"\";\n    for (var i = 0; i < r.args.length; ++i) {\n      res += this.genLiteral(r.fixedArgs[i]);\n      res += \" + \";\n      res += this.localNames[r.args[i]];\n      res += \" + \";\n    }\n    res += this.genLiteral(r.fixedArgs[r.args.length]);\n    return res;\n  }\n\n  genLiteral(value):string {\n    return JSON.stringify(value);\n  }\n\n  genNotify(r):string{\n    return r.lastInDirective ? notifyTemplate(r.selfIndex - 1) : '';\n  }\n\n  genArgs(r:ProtoRecord):string {\n    return r.args.map((arg) => this.localNames[arg]).join(\", \");\n  }\n}\n\n\n\n\n","assert.argumentTypes($__placeholder__0)","assert.type.$__placeholder__0)","return assert.returnType(($__placeholder__0), $__placeholder__1)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","assert.genericType($__placeholder__0)"]}