{"version":3,"sources":["css_processor_spec.js","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/7"],"names":[],"mappings":"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","file":"/Users/crush/Documents/learning_js/angular/modules/angular2/test/core/compiler/css_processor_spec.js","sourceRoot":"/Users/crush/Documents/learning_js/angular/modules/angular2/test/core/compiler/","sourcesContent":["import {describe, it, expect, beforeEach, ddescribe, iit, xit, el} from 'angular2/test_lib';\nimport {CssProcessor, CssTransformer} from 'angular2/src/core/compiler/css_processor';\n\nimport {ShadowDomStrategy} from 'angular2/src/core/compiler/shadow_dom_strategy';\n\nimport {CompilePipeline} from 'angular2/src/core/compiler/pipeline/compile_pipeline';\nimport {CompileElement} from 'angular2/src/core/compiler/pipeline/compile_element';\nimport {CompileStep} from 'angular2/src/core/compiler/pipeline/compile_step';\nimport {CompileControl} from 'angular2/src/core/compiler/pipeline/compile_control';\n\nimport {DOM} from 'angular2/src/dom/dom_adapter';\n\nimport {Component} from 'angular2/src/core/annotations/annotations';\n\nimport {DirectiveMetadata} from 'angular2/src/core/compiler/directive_metadata';\n\nimport {ListWrapper} from 'angular2/src/facade/collection';\n\nexport function main() {\n  describe('CssProcessor', () => {\n    describe('compile step', () => {\n      function createPipeline(cssProcessor: CssProcessor, strategy: ShadowDomStrategy,\n                              templateUrl: string) {\n        var annotation = new Component();\n        var meta = new DirectiveMetadata(SomeComponent, annotation);\n        return new CompilePipeline([\n          cssProcessor.getCompileStep(meta, strategy, templateUrl)\n        ]);\n      }\n\n      it('it should set ignoreBindings to true for style elements', () => {\n        var strategy = new FakeShadowDomStrategy(null);\n        var cssProcessor = new CssProcessor(null);\n\n        var pipeline = createPipeline(cssProcessor, strategy, 'http://base');\n        var results = pipeline.process(el('<div><style></style></div>'));\n\n        expect(results[0].ignoreBindings).toBe(false);\n        expect(results[1].ignoreBindings).toBe(true);\n      });\n\n      it('should execute the strategy step for style elements', () => {\n        var processedEls = [];\n        var compileStep = new MockStep((parent, current, control) => {\n          ListWrapper.push(processedEls, current.element);\n        });\n        var strategy = new FakeShadowDomStrategy(compileStep);\n\n        var cssProcessor = new CssProcessor(null);\n        var pipeline = createPipeline(cssProcessor, strategy, 'http://base');\n        var results = pipeline.process(el('<div><style></style></div>'));\n\n        expect(processedEls.length).toEqual(1);\n        expect(processedEls[0]).toBe(results[1].element);\n      });\n\n      it('should apply the given transformers', () => {\n        var strategy = new FakeShadowDomStrategy(null);\n        var cssProcessor = new CssProcessor([\n          new FakeCssTransformer('/*transformer1 */'),\n          new FakeCssTransformer('/*transformer2 */'),\n        ]);\n\n        var pipeline = createPipeline(cssProcessor, strategy, 'http://base');\n        var results = pipeline.process(el('<div><style></style></div>'));\n\n        expect(results[1].element).toHaveText('/*transformer1 *//*transformer2 */');\n      });\n    });\n  });\n}\n\nclass FakeShadowDomStrategy extends ShadowDomStrategy {\n  _compileStep: CompileStep;\n\n  constructor(compileStep: CompileStep) {\n    super();\n    this._compileStep = compileStep;\n  }\n\n  getStyleCompileStep(cmpMetadata: DirectiveMetadata, templateUrl: string): CompileStep {\n    return this._compileStep;\n  }\n}\n\nclass MockStep extends CompileStep {\n  processClosure:Function;\n  constructor(process) {\n    super();\n    this.processClosure = process;\n  }\n  process(parent:CompileElement, current:CompileElement, control:CompileControl) {\n    this.processClosure(parent, current, control);\n  }\n}\n\nclass FakeCssTransformer extends CssTransformer {\n  _css: string;\n\n  constructor(css: string) {\n    super();\n    this._css = css;\n  }\n\n  transform(styleEl) {\n    var cssText = DOM.getText(styleEl);\n    cssText += this._css;\n    DOM.setText(styleEl, cssText);\n  }\n}\n\nclass SomeComponent {}\n","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","assert.type.$__placeholder__0)"]}