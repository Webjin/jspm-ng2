{"version":3,"sources":["shadow_dom_strategy.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/3034","@traceur/generated/TemplateParser/3035","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/25","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/3036","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/3037","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/3038","@traceur/generated/TemplateParser/3039","@traceur/generated/TemplateParser/3040","@traceur/generated/TemplateParser/3041","@traceur/generated/TemplateParser/3042","@traceur/generated/TemplateParser/3043","@traceur/generated/TemplateParser/3044","@traceur/generated/TemplateParser/368"],"names":[],"mappings":"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","file":"/Users/crush/Documents/learning_js/angular/modules/angular2/src/core/compiler/shadow_dom_strategy.js","sourceRoot":"/Users/crush/Documents/learning_js/angular/modules/angular2/src/core/compiler/","sourcesContent":["import {Type, isBlank, isPresent, int} from 'angular2/src/facade/lang';\nimport {List, ListWrapper, MapWrapper, Map} from 'angular2/src/facade/collection';\nimport {PromiseWrapper} from 'angular2/src/facade/async';\n\nimport {DOM} from 'angular2/src/dom/dom_adapter';\n\nimport * as viewModule from './view';\n\nimport {Content} from './shadow_dom_emulation/content_tag';\nimport {LightDom} from './shadow_dom_emulation/light_dom';\nimport {ShadowCss} from './shadow_dom_emulation/shadow_css';\n\nimport {StyleInliner} from './style_inliner';\nimport {StyleUrlResolver} from './style_url_resolver';\n\nimport {DirectiveMetadata} from './directive_metadata';\n\nimport * as NS from './pipeline/compile_step';\nimport {CompileElement} from './pipeline/compile_element';\nimport {CompileControl} from './pipeline/compile_control';\n\nexport class ShadowDomStrategy {\n  attachTemplate(el, view:viewModule.View) {}\n  constructLightDom(lightDomView:viewModule.View, shadowDomView:viewModule.View, el): LightDom { return null; }\n  polyfillDirectives():List<Type> { return []; }\n\n  /**\n   * An optional step that can modify the template style elements.\n   *\n   * @param {DirectiveMetadata} cmpMetadata\n   * @param {string} templateUrl the template base URL\n   * @returns {CompileStep} a compile step to append to the compiler pipeline, null if not required.\n   */\n  getStyleCompileStep(cmpMetadata: DirectiveMetadata, templateUrl: string): NS.CompileStep {\n    return null;\n  }\n\n  /**\n   * An optional step that can modify the template elements (style elements exlcuded).\n   *\n   * This step could be used to modify the template in order to scope the styles.\n   *\n   * @param {DirectiveMetadata} cmpMetadata\n   * @returns {CompileStep} a compile step to append to the compiler pipeline, null if not required.\n   */\n  getTemplateCompileStep(cmpMetadata: DirectiveMetadata): NS.CompileStep { return null; }\n\n  /**\n   * The application element does not go through the compiler pipeline.\n   *\n   * This methods is called when the root ProtoView is created and to optionnaly update the\n   * application root element.\n   *\n   * @see ProtoView.createRootProtoView\n   *\n   * @param {DirectiveMetadata} cmpMetadata\n   * @param element\n   */\n  shimAppElement(cmpMetadata: DirectiveMetadata, element) {}\n}\n\n/**\n * This strategy emulates the Shadow DOM for the templates, styles **excluded**:\n * - components templates are added as children of their component element,\n * - styles are moved from the templates to the styleHost (i.e. the document head).\n *\n * Notes:\n * - styles are **not** scoped to their component and will apply to the whole document,\n * - you can **not** use shadow DOM specific selectors in the styles\n */\nexport class EmulatedUnscopedShadowDomStrategy extends ShadowDomStrategy {\n  _styleUrlResolver: StyleUrlResolver;\n  _styleHost;\n\n  constructor(styleUrlResolver: StyleUrlResolver, styleHost) {\n    super();\n    this._styleUrlResolver = styleUrlResolver;\n    this._styleHost = styleHost;\n  }\n\n  attachTemplate(el, view:viewModule.View) {\n    DOM.clearNodes(el);\n    _moveViewNodesIntoParent(el, view);\n  }\n\n  constructLightDom(lightDomView:viewModule.View, shadowDomView:viewModule.View, el): LightDom {\n    return new LightDom(lightDomView, shadowDomView, el);\n  }\n\n  polyfillDirectives():List<Type> {\n    return [Content];\n  }\n\n  getStyleCompileStep(cmpMetadata: DirectiveMetadata, templateUrl: string): NS.CompileStep {\n    return new _EmulatedUnscopedCssStep(cmpMetadata, templateUrl, this._styleUrlResolver,\n      this._styleHost);\n  }\n}\n\n/**\n * This strategy emulates the Shadow DOM for the templates, styles **included**:\n * - components templates are added as children of their component element,\n * - both the template and the styles are modified so that styles are scoped to the component\n *   they belong to,\n * - styles are moved from the templates to the styleHost (i.e. the document head).\n *\n * Notes:\n * - styles are scoped to their component and will apply only to it,\n * - a common subset of shadow DOM selectors are supported,\n * - see `ShadowCss` for more information and limitations.\n */\nexport class EmulatedScopedShadowDomStrategy extends EmulatedUnscopedShadowDomStrategy {\n  _styleInliner: StyleInliner;\n\n  constructor(styleInliner: StyleInliner, styleUrlResolver: StyleUrlResolver, styleHost) {\n    super(styleUrlResolver, styleHost);\n    this._styleInliner = styleInliner;\n  }\n\n  getStyleCompileStep(cmpMetadata: DirectiveMetadata, templateUrl: string): NS.CompileStep {\n    return new _EmulatedScopedCssStep(cmpMetadata, templateUrl, this._styleInliner,\n      this._styleUrlResolver, this._styleHost);\n  }\n\n  getTemplateCompileStep(cmpMetadata: DirectiveMetadata): NS.CompileStep {\n    return new _ShimShadowDomStep(cmpMetadata);\n  }\n\n  shimAppElement(cmpMetadata: DirectiveMetadata, element) {\n    var cmpType = cmpMetadata.type;\n    var hostAttribute = _getHostAttribute(_getComponentId(cmpType));\n    DOM.setAttribute(element, hostAttribute, '');\n  }\n}\n\n/**\n * This strategies uses the native Shadow DOM support.\n *\n * The templates for the component are inserted in a Shadow Root created on the component element.\n * Hence they are strictly isolated.\n */\nexport class NativeShadowDomStrategy extends ShadowDomStrategy {\n  _styleUrlResolver: StyleUrlResolver;\n\n  constructor(styleUrlResolver: StyleUrlResolver) {\n    super();\n    this._styleUrlResolver = styleUrlResolver;\n  }\n\n  attachTemplate(el, view:viewModule.View){\n    _moveViewNodesIntoParent(DOM.createShadowRoot(el), view);\n  }\n\n  getStyleCompileStep(cmpMetadata: DirectiveMetadata, templateUrl: string): NS.CompileStep {\n    return new _NativeCssStep(templateUrl, this._styleUrlResolver);\n  }\n}\n\nclass _ShimShadowDomStep extends NS.CompileStep {\n  _contentAttribute: string;\n\n  constructor(cmpMetadata: DirectiveMetadata) {\n    super();\n    var id = _getComponentId(cmpMetadata.type);\n    this._contentAttribute = _getContentAttribute(id);\n  }\n\n\n  process(parent:CompileElement, current:CompileElement, control:CompileControl) {\n    if (current.ignoreBindings) {\n      return;\n    }\n\n    // Shim the element as a child of the compiled component\n    DOM.setAttribute(current.element, this._contentAttribute, '');\n\n    // If the current element is also a component, shim it as a host\n    var host = current.componentDirective;\n    if (isPresent(host)) {\n      var hostId = _getComponentId(host.type);\n      var hostAttribute = _getHostAttribute(hostId);\n      DOM.setAttribute(current.element, hostAttribute, '');\n    }\n  }\n}\n\nclass _EmulatedUnscopedCssStep extends NS.CompileStep {\n  _templateUrl: string;\n  _styleUrlResolver: StyleUrlResolver;\n  _styleHost;\n\n  constructor(cmpMetadata: DirectiveMetadata, templateUrl: string,\n    styleUrlResolver: StyleUrlResolver, styleHost) {\n    super();\n    this._templateUrl = templateUrl;\n    this._styleUrlResolver = styleUrlResolver;\n    this._styleHost = styleHost;\n  }\n\n  process(parent:CompileElement, current:CompileElement, control:CompileControl) {\n    var styleEl = current.element;\n    var cssText = DOM.getText(styleEl);\n    cssText = this._styleUrlResolver.resolveUrls(cssText, this._templateUrl);\n    DOM.setText(styleEl, cssText);\n    DOM.remove(styleEl);\n\n    if (!MapWrapper.contains(_sharedStyleTexts, cssText)) {\n      // Styles are unscoped and shared across components, only append them to the head\n      // when there are not present yet\n      MapWrapper.set(_sharedStyleTexts, cssText, true);\n      _insertStyleElement(this._styleHost, styleEl);\n    }\n  }\n}\n\nclass _EmulatedScopedCssStep extends NS.CompileStep {\n  _templateUrl: string;\n  _component: Type;\n  _styleInliner: StyleInliner;\n  _styleUrlResolver: StyleUrlResolver;\n  _styleHost;\n\n  constructor(cmpMetadata: DirectiveMetadata, templateUrl: string, styleInliner: StyleInliner,\n    styleUrlResolver: StyleUrlResolver, styleHost) {\n    super();\n    this._templateUrl = templateUrl;\n    this._component = cmpMetadata.type;\n    this._styleInliner = styleInliner;\n    this._styleUrlResolver = styleUrlResolver;\n    this._styleHost = styleHost;\n  }\n\n  process(parent:CompileElement, current:CompileElement, control:CompileControl) {\n    var styleEl = current.element;\n\n    var cssText = DOM.getText(styleEl);\n\n    cssText = this._styleUrlResolver.resolveUrls(cssText, this._templateUrl);\n    var css = this._styleInliner.inlineImports(cssText, this._templateUrl);\n\n    if (PromiseWrapper.isPromise(css)) {\n      DOM.setText(styleEl, '');\n      ListWrapper.push(parent.inheritedProtoView.stylePromises, css);\n      return css.then((css) => {\n        css = _shimCssForComponent(css, this._component);\n        DOM.setText(styleEl, css);\n      });\n    } else {\n      css = _shimCssForComponent(css, this._component);\n      DOM.setText(styleEl, css);\n    }\n\n    DOM.remove(styleEl);\n    _insertStyleElement(this._styleHost, styleEl);\n  }\n}\n\nclass _NativeCssStep extends NS.CompileStep {\n  _styleUrlResolver: StyleUrlResolver;\n  _templateUrl: string;\n\n  constructor(templateUrl: string, styleUrlResover: StyleUrlResolver) {\n    super();\n    this._styleUrlResolver = styleUrlResover;\n    this._templateUrl = templateUrl;\n  }\n\n  process(parent:CompileElement, current:CompileElement, control:CompileControl) {\n    var styleEl = current.element;\n    var cssText = DOM.getText(styleEl);\n    cssText = this._styleUrlResolver.resolveUrls(cssText, this._templateUrl);\n    DOM.setText(styleEl, cssText);\n  }\n}\n\nfunction _moveViewNodesIntoParent(parent, view) {\n  for (var i = 0; i < view.nodes.length; ++i) {\n    DOM.appendChild(parent, view.nodes[i]);\n  }\n}\n\nvar _componentUIDs: Map<Type, int> = MapWrapper.create();\nvar _nextComponentUID: int = 0;\nvar _sharedStyleTexts: Map<string, boolean> = MapWrapper.create();\nvar _lastInsertedStyleEl;\n\nfunction _getComponentId(component: Type) {\n  var id = MapWrapper.get(_componentUIDs, component);\n  if (isBlank(id)) {\n    id = _nextComponentUID++;\n    MapWrapper.set(_componentUIDs, component, id);\n  }\n  return id;\n}\n\nfunction _insertStyleElement(host, styleEl) {\n  if (isBlank(_lastInsertedStyleEl)) {\n    var firstChild = DOM.firstChild(host);\n    if (isPresent(firstChild)) {\n      DOM.insertBefore(firstChild, styleEl);\n    } else {\n      DOM.appendChild(host, styleEl);\n    }\n  } else {\n    DOM.insertAfter(_lastInsertedStyleEl, styleEl);\n  }\n  _lastInsertedStyleEl = styleEl;\n}\n\n// Return the attribute to be added to the component\nfunction _getHostAttribute(id: int) {\n  return `_nghost-${id}`;\n}\n\n// Returns the attribute to be added on every single element nodes in the component\nfunction _getContentAttribute(id: int) {\n  return `_ngcontent-${id}`;\n}\n\nfunction _shimCssForComponent(cssText: string, component: Type): string {\n  var id = _getComponentId(component);\n  var shadowCss = new ShadowCss();\n  return shadowCss.shimCssText(cssText, _getContentAttribute(id), _getHostAttribute(id));\n}\n\n// Reset the caches - used for tests only\nexport function resetShadowDomCache() {\n  MapWrapper.clear(_componentUIDs);\n  _nextComponentUID = 0;\n  MapWrapper.clear(_sharedStyleTexts);\n  _lastInsertedStyleEl = null;\n}\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","assert.argumentTypes($__placeholder__0)","assert.type.any","assert.type.any","return assert.returnType(($__placeholder__0), $__placeholder__1)","assert.genericType($__placeholder__0)","assert.type.$__placeholder__0)","assert.type.any","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","assert.type.any","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","assert.type.any","assert.type.any","assert.type.any","assert.type.any","assert.type.any","assert.type.any","assert.type.any","assert.type($__placeholder__0, $__placeholder__1)"]}