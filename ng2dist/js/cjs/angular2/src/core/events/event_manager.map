{"version":3,"sources":["event_manager.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/25","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/3162","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/3163","@traceur/generated/TemplateParser/172","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/3164"],"names":[],"mappings":"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","file":"/Users/crush/Documents/learning_js/angular/modules/angular2/src/core/events/event_manager.js","sourceRoot":"/Users/crush/Documents/learning_js/angular/modules/angular2/src/core/events/","sourcesContent":["import {isBlank, BaseException, isPresent, StringWrapper} from 'angular2/src/facade/lang';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {List, ListWrapper, MapWrapper} from 'angular2/src/facade/collection';\nimport {VmTurnZone} from 'angular2/src/core/zone/vm_turn_zone';\n\nvar BUBBLE_SYMBOL = '^';\n\nexport class EventManager {\n  _plugins: List<EventManagerPlugin>;\n  _zone: VmTurnZone;\n\n  constructor(plugins: List<EventManagerPlugin>, zone: VmTurnZone) {\n    this._zone = zone;\n    this._plugins = plugins;\n    for (var i = 0; i < plugins.length; i++) {\n      plugins[i].manager = this;\n    }\n  }\n\n  addEventListener(element, eventName: string, handler: Function) {\n    var shouldSupportBubble = eventName[0] == BUBBLE_SYMBOL; \n    if (shouldSupportBubble) {\n      eventName = StringWrapper.substring(eventName, 1); \n    }\n\n    var plugin = this._findPluginFor(eventName);\n    plugin.addEventListener(element, eventName, handler, shouldSupportBubble);\n  }\n\n  getZone(): VmTurnZone {\n    return this._zone;\n  }\n\n  _findPluginFor(eventName: string): EventManagerPlugin {\n    var plugins = this._plugins;\n    for (var i = 0; i < plugins.length; i++) {\n      var plugin = plugins[i];\n      if (plugin.supports(eventName)) {\n        return plugin;\n      }\n    }\n    throw new BaseException(`No event manager plugin found for event ${eventName}`);\n  }\n}\n\nexport class EventManagerPlugin {\n  manager: EventManager;\n\n  // We are assuming here that all plugins support bubbled and non-bubbled events.\n  // That is equivalent to having supporting $event.target\n  // The bubbling flag (currently ^) is stripped before calling the supports and \n  // addEventListener methods.\n  supports(eventName: string): boolean {\n    return false;\n  }\n\n  addEventListener(element, eventName: string, handler: Function,\n      shouldSupportBubble: boolean) {\n    throw \"not implemented\";\n  }\n}\n\nexport class DomEventsPlugin extends EventManagerPlugin {\n  manager: EventManager;\n\n  // This plugin should come last in the list of plugins, because it accepts all\n  // events.\n  supports(eventName: string): boolean {\n    return true;\n  }\n\n  addEventListener(element, eventName: string, handler: Function,\n      shouldSupportBubble: boolean) {\n    var outsideHandler = shouldSupportBubble ?\n      DomEventsPlugin.bubbleCallback(element, handler, this.manager._zone) :\n      DomEventsPlugin.sameElementCallback(element, handler, this.manager._zone);\n\n    this.manager._zone.runOutsideAngular(() => {\n      DOM.on(element, eventName, outsideHandler);\n    });\n  }\n\n  static sameElementCallback(element, handler, zone) {\n    return (event) => {\n        if (event.target === element) {\n          zone.run(() => handler(event));\n        }\n      };\n  }\n\n  static bubbleCallback(element, handler, zone) {\n    return (event) => zone.run(() => handler(event));\n  }\n}\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","var $__placeholder__0 = $__placeholder__1","assert.argumentTypes($__placeholder__0)","assert.genericType($__placeholder__0)","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","assert.type.any","assert.type.$__placeholder__0)","return assert.returnType(($__placeholder__0), $__placeholder__1)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","assert.type.any","$traceurRuntime.superConstructor(\n          $__placeholder__0).apply(this, arguments)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","assert.type.any"]}