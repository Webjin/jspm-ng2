{"version":3,"sources":["directives.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/990"],"names":[],"mappings":"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","file":"/Users/crush/Documents/learning_js/angular/modules/angular2/src/forms/directives.js","sourceRoot":"/Users/crush/Documents/learning_js/angular/modules/angular2/src/forms/","sourcesContent":["import {Template, Component, Decorator, NgElement, Ancestor, onChange} from 'angular2/core';\nimport {Optional} from 'angular2/di';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {isBlank, isPresent, isString, CONST} from 'angular2/src/facade/lang';\nimport {StringMapWrapper, ListWrapper} from 'angular2/src/facade/collection';\nimport {ControlGroup, Control} from './model';\nimport * as validators from './validators';\n\n@CONST()\nexport class ControlValueAccessor {\n  readValue(el){}\n  writeValue(el, value):void {}\n}\n\n@CONST()\nclass DefaultControlValueAccessor extends ControlValueAccessor {\n  constructor() {\n    super();\n  }\n\n  readValue(el) {\n    return DOM.getValue(el);\n  }\n\n  writeValue(el, value):void {\n    DOM.setValue(el,value);\n  }\n}\n\n@CONST()\nclass CheckboxControlValueAccessor extends ControlValueAccessor {\n  constructor() {\n    super();\n  }\n\n  readValue(el):boolean {\n    return DOM.getChecked(el);\n  }\n\n  writeValue(el, value:boolean):void {\n    DOM.setChecked(el, value);\n  }\n}\n\nvar controlValueAccessors = {\n  \"checkbox\" : new CheckboxControlValueAccessor(),\n  \"text\" : new DefaultControlValueAccessor()\n};\n\nfunction controlValueAccessorFor(controlType:string):ControlValueAccessor {\n  var accessor = StringMapWrapper.get(controlValueAccessors, controlType);\n  if (isPresent(accessor)) {\n    return accessor;\n  } else {\n    return StringMapWrapper.get(controlValueAccessors, \"text\");\n  }\n}\n\n@Decorator({\n  lifecycle: [onChange],\n  selector: '[control]',\n  bind: {\n    'controlName' : 'control',\n    'type' : 'type'\n  }\n})\nexport class ControlDirective {\n  _groupDirective:ControlGroupDirective;\n  _el:NgElement;\n\n  controlName:string;\n  type:string;\n  valueAccessor:ControlValueAccessor;\n\n  validator:Function;\n\n  constructor(@Ancestor() groupDirective:ControlGroupDirective, el:NgElement)  {\n    this._groupDirective = groupDirective;\n    this._el = el;\n    this.validator = validators.nullValidator;\n  }\n\n  // TODO: vsavkin this should be moved into the constructor once static bindings\n  // are implemented\n  onChange(_) {\n    this._initialize();\n  }\n\n  _initialize() {\n    this._groupDirective.addDirective(this);\n\n    var c = this._control();\n    c.validator = validators.compose([c.validator, this.validator]);\n\n    if (isBlank(this.valueAccessor)) {\n      this.valueAccessor = controlValueAccessorFor(this.type);\n    }\n\n    this._updateDomValue();\n    DOM.on(this._el.domElement, \"change\", (_) => this._updateControlValue());\n  }\n\n  _updateDomValue() {\n    this.valueAccessor.writeValue(this._el.domElement, this._control().value);\n  }\n\n  _updateControlValue() {\n    this._control().updateValue(this.valueAccessor.readValue(this._el.domElement));\n  }\n\n  _control() {\n    return this._groupDirective.findControl(this.controlName);\n  }\n}\n\n@Decorator({\n  selector: '[control-group]',\n  bind: {\n    'controlGroup' : 'control-group'\n  }\n})\nexport class ControlGroupDirective {\n  _groupDirective:ControlGroupDirective;\n  _controlGroupName:string;\n\n  _controlGroup:ControlGroup;\n  _directives:List<ControlDirective>;\n\n  constructor(@Optional() @Ancestor() groupDirective:ControlGroupDirective) {\n    super();\n    this._groupDirective = groupDirective;\n    this._directives = ListWrapper.create();\n  }\n\n  set controlGroup(controlGroup) {\n    if (isString(controlGroup)) {\n      this._controlGroupName = controlGroup;\n    } else {\n      this._controlGroup = controlGroup;\n    }\n    this._updateDomValue();\n  }\n\n  _updateDomValue() {\n    ListWrapper.forEach(this._directives, (cd) => cd._updateDomValue());\n  }\n\n  addDirective(c:ControlDirective) {\n    ListWrapper.push(this._directives, c);\n  }\n\n  findControl(name:string):any {\n    return this._getControlGroup().controls[name];\n  }\n\n  _getControlGroup():ControlGroup {\n    if (isPresent(this._controlGroupName)) {\n      return this._groupDirective.findControl(this._controlGroupName)\n    } else {\n      return this._controlGroup;\n    }\n  }\n}\n\nexport var FormDirectives = [\n  ControlGroupDirective, ControlDirective\n];\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","return assert.returnType(($__placeholder__0), $__placeholder__1)","assert.type.$__placeholder__0)","assert.argumentTypes($__placeholder__0)","assert.type.any"]}