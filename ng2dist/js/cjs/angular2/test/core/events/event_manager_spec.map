{"version":3,"sources":["event_manager_spec.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/25","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/3181","@traceur/generated/TemplateParser/10"],"names":[],"mappings":"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","file":"/Users/crush/Documents/learning_js/angular/modules/angular2/test/core/events/event_manager_spec.js","sourceRoot":"/Users/crush/Documents/learning_js/angular/modules/angular2/test/core/events/","sourcesContent":["import {describe, ddescribe, it, iit, xit, xdescribe, expect, beforeEach, el} from 'angular2/test_lib';\nimport {EventManager, EventManagerPlugin, DomEventsPlugin} from 'angular2/src/core/events/event_manager';\nimport {VmTurnZone} from 'angular2/src/core/zone/vm_turn_zone';\nimport {List, ListWrapper, Map, MapWrapper} from 'angular2/src/facade/collection';\nimport {document} from 'angular2/src/facade/browser';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\n\nexport function main() {\n  var domEventPlugin;\n\n  beforeEach(() => {\n    domEventPlugin = new DomEventsPlugin();\n  });\n\n  describe('EventManager', () => {\n\n    it('should delegate event bindings to plugins', () => {\n      var element = el('<div></div>');\n      var handler = (e) => e;\n      var plugin = new FakeEventManagerPlugin(['click']);\n      var manager = new EventManager([plugin, domEventPlugin], new FakeVmTurnZone());\n      manager.addEventListener(element, 'click', handler);\n      expect(MapWrapper.get(plugin._nonBubbleEventHandlers, 'click')).toBe(handler);\n    });\n\n    it('should delegate bubbling events to plugins', () => {\n      var element = el('<div></div>');\n      var handler = (e) => e;\n      var plugin = new FakeEventManagerPlugin(['click']);\n      var manager = new EventManager([plugin, domEventPlugin], new FakeVmTurnZone());\n      manager.addEventListener(element, '^click', handler);\n      expect(MapWrapper.get(plugin._bubbleEventHandlers, 'click')).toBe(handler);\n    });\n\n    it('should delegate event bindings to the first plugin supporting the event', () => {\n      var element = el('<div></div>');\n      var clickHandler = (e) => e;\n      var dblClickHandler = (e) => e;\n      var plugin1= new FakeEventManagerPlugin(['dblclick']);\n      var plugin2 = new FakeEventManagerPlugin(['click', 'dblclick']);\n      var manager = new EventManager([plugin1, plugin2], new FakeVmTurnZone());\n      manager.addEventListener(element, 'click', clickHandler);\n      manager.addEventListener(element, 'dblclick', dblClickHandler);\n      expect(MapWrapper.contains(plugin1._nonBubbleEventHandlers, 'click')).toBe(false);\n      expect(MapWrapper.get(plugin2._nonBubbleEventHandlers, 'click')).toBe(clickHandler);\n      expect(MapWrapper.contains(plugin2._nonBubbleEventHandlers, 'dblclick')).toBe(false);\n      expect(MapWrapper.get(plugin1._nonBubbleEventHandlers, 'dblclick')).toBe(dblClickHandler);\n    });\n\n    it('should throw when no plugin can handle the event', () => {\n      var element = el('<div></div>');\n      var plugin = new FakeEventManagerPlugin(['dblclick']);\n      var manager = new EventManager([plugin], new FakeVmTurnZone());\n      expect(() => manager.addEventListener(element, 'click', null))\n        .toThrowError('No event manager plugin found for event click');\n    });\n\n    it('by default events are only caught on same element', () => {\n      var element = el('<div><div></div></div>');\n      var child = DOM.firstChild(element);\n      var dispatchedEvent = DOM.createMouseEvent('click');\n      var receivedEvent = null;\n      var handler = (e) => { receivedEvent = e; };\n      var manager = new EventManager([domEventPlugin], new FakeVmTurnZone());\n      manager.addEventListener(element, 'click', handler);\n      DOM.dispatchEvent(child, dispatchedEvent);\n\n      expect(receivedEvent).toBe(null);\n    });\n\n    it('bubbled events are caught when fired from a child', () => {\n      var element = el('<div><div></div></div>');\n      // Workaround for https://bugs.webkit.org/show_bug.cgi?id=122755\n      DOM.appendChild(document.body, element);\n\n      var child = DOM.firstChild(element);\n      var dispatchedEvent = DOM.createMouseEvent('click');\n      var receivedEvent = null;\n      var handler = (e) => { receivedEvent = e; };\n      var manager = new EventManager([domEventPlugin], new FakeVmTurnZone());\n      manager.addEventListener(element, '^click', handler);\n      DOM.dispatchEvent(child, dispatchedEvent);\n\n      expect(receivedEvent).toBe(dispatchedEvent);\n    });\n  });\n}\n\nclass FakeEventManagerPlugin extends EventManagerPlugin {\n  _supports: List<string>;\n  _nonBubbleEventHandlers: Map;\n  _bubbleEventHandlers: Map;\n  constructor(supports: List<string>) {\n    super();\n    this._supports = supports;\n    this._nonBubbleEventHandlers = MapWrapper.create();\n    this._bubbleEventHandlers = MapWrapper.create();\n  }\n\n  supports(eventName: string): boolean {\n    return ListWrapper.contains(this._supports, eventName);\n  }\n\n  addEventListener(element, eventName: string, handler: Function, shouldSupportBubble: boolean) {\n    MapWrapper.set(shouldSupportBubble ? this._bubbleEventHandlers : this._nonBubbleEventHandlers,\n        eventName, handler);\n  }\n}\n\nclass FakeVmTurnZone extends VmTurnZone {\n  constructor() {\n    super({enableLongStackTrace: false});\n  }\n\n  run(fn) {\n    fn();\n  }\n\n  runOutsideAngular(fn) {\n    fn();\n  }\n}\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","var $__placeholder__0 = $__placeholder__1","assert.argumentTypes($__placeholder__0)","assert.genericType($__placeholder__0)","assert.type.$__placeholder__0)","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","return assert.returnType(($__placeholder__0), $__placeholder__1)","assert.type.any","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});"]}