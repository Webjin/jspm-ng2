{"version":3,"sources":["style_inliner_spec.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/25","@traceur/generated/TemplateParser/10"],"names":[],"mappings":"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","file":"/Users/crush/Documents/learning_js/angular/modules/angular2/test/core/compiler/style_inliner_spec.js","sourceRoot":"/Users/crush/Documents/learning_js/angular/modules/angular2/test/core/compiler/","sourcesContent":["import {describe, it, expect, beforeEach, ddescribe, iit, xit, el} from 'angular2/test_lib';\nimport {StyleInliner} from 'angular2/src/core/compiler/style_inliner';\n\nimport {isBlank} from 'angular2/src/facade/lang';\nimport {Promise, PromiseWrapper} from 'angular2/src/facade/async';\nimport {Map, MapWrapper} from 'angular2/src/facade/collection';\n\nimport {XHR} from 'angular2/src/core/compiler/xhr/xhr';\nimport {UrlResolver} from 'angular2/src/core/compiler/url_resolver';\nimport {StyleUrlResolver} from 'angular2/src/core/compiler/style_url_resolver';\n\nexport function main() {\n  describe('StyleInliner', () => {\n    var xhr, inliner;\n\n    beforeEach(() => {\n      xhr = new FakeXHR();\n      var urlResolver = new UrlResolver();\n      var styleUrlResolver = new StyleUrlResolver(urlResolver);\n      inliner = new StyleInliner(xhr, styleUrlResolver, urlResolver);\n    });\n\n    describe('loading', () => {\n      it('should return a string when there is no import statement', () => {\n        var css = '.main {}';\n        var loadedCss = inliner.inlineImports(css, 'http://base');\n        expect(loadedCss).not.toBePromise();\n        expect(loadedCss).toEqual(css);\n      });\n\n      it('should inline @import rules', (done) => {\n        xhr.reply('http://base/one.css', '.one {}');\n        var css = '@import url(\"one.css\");.main {}';\n        var loadedCss = inliner.inlineImports(css, 'http://base');\n        expect(loadedCss).toBePromise();\n        PromiseWrapper.then(\n          loadedCss,\n          function(css) {\n            expect(css).toEqual('.one {}\\n.main {}');\n            done();\n          },\n          function(e) {\n            throw 'fail;'\n          }\n        );\n      });\n\n      // TODO(vicb): fix the StyleInliner\n      it('should support url([unquoted url]) in @import rules', (done) => {\n        xhr.reply('http://base/one.css', '.one {}');\n        var css = '@import url(one.css);.main {}';\n        var loadedCss = inliner.inlineImports(css, 'http://base');\n        expect(loadedCss).toBePromise();\n        PromiseWrapper.then(\n          loadedCss,\n          function(css) {\n            expect(css).toEqual('.one {}\\n.main {}');\n            done();\n          },\n          function(e) {\n            throw 'fail;'\n          }\n        );\n      });\n\n      it('should handle @import error gracefuly', (done) => {\n        var css = '@import \"one.css\";.main {}';\n        var loadedCss = inliner.inlineImports(css, 'http://base');\n        expect(loadedCss).toBePromise();\n        PromiseWrapper.then(\n          loadedCss,\n          function(css) {\n            expect(css).toEqual('/* failed to import http://base/one.css */\\n.main {}');\n            done();\n          },\n          function(e) {\n            throw 'fail;'\n          }\n        );\n      });\n\n      it('should inline multiple @import rules', (done) => {\n        xhr.reply('http://base/one.css', '.one {}');\n        xhr.reply('http://base/two.css', '.two {}');\n        var css = '@import \"one.css\";@import \"two.css\";.main {}';\n        var loadedCss = inliner.inlineImports(css, 'http://base');\n        expect(loadedCss).toBePromise();\n        PromiseWrapper.then(\n          loadedCss,\n          function(css) {\n            expect(css).toEqual('.one {}\\n.two {}\\n.main {}');\n            done();\n          },\n          function(e) {\n            throw 'fail;'\n          }\n        );\n      });\n\n      it('should inline nested @import rules', (done) => {\n        xhr.reply('http://base/one.css', '@import \"two.css\";.one {}');\n        xhr.reply('http://base/two.css', '.two {}');\n        var css = '@import \"one.css\";.main {}';\n        var loadedCss = inliner.inlineImports(css, 'http://base/');\n        expect(loadedCss).toBePromise();\n        PromiseWrapper.then(\n          loadedCss,\n          function(css) {\n            expect(css).toEqual('.two {}\\n.one {}\\n.main {}');\n            done();\n          },\n          function(e) {\n            throw 'fail;'\n          }\n        );\n      });\n\n      it('should handle circular dependencies gracefuly', (done) => {\n        xhr.reply('http://base/one.css', '@import \"two.css\";.one {}');\n        xhr.reply('http://base/two.css', '@import \"one.css\";.two {}');\n        var css = '@import \"one.css\";.main {}';\n        var loadedCss = inliner.inlineImports(css, 'http://base/');\n        expect(loadedCss).toBePromise();\n        PromiseWrapper.then(\n          loadedCss,\n          function(css) {\n            expect(css).toEqual('.two {}\\n.one {}\\n.main {}');\n            done();\n          },\n          function(e) {\n            throw 'fail;'\n          }\n        );\n      });\n\n      it('should handle invalid @import fracefuly', (done) => {\n        // Invalid rule: the url is not quoted\n        var css = '@import one.css;.main {}';\n        var loadedCss = inliner.inlineImports(css, 'http://base/');\n        expect(loadedCss).toBePromise();\n        PromiseWrapper.then(\n          loadedCss,\n          function(css) {\n            expect(css).toEqual('/* Invalid import rule: \"@import one.css;\" */.main {}');\n            done();\n          },\n          function(e) {\n            throw 'fail;'\n          }\n        );\n      });\n    });\n\n    describe('media query', () => {\n      it('should wrap inlined content in media query', (done) => {\n        xhr.reply('http://base/one.css', '.one {}');\n        var css = '@import \"one.css\" (min-width: 700px) and (orientation: landscape);';\n        var loadedCss = inliner.inlineImports(css, 'http://base/');\n        expect(loadedCss).toBePromise();\n        PromiseWrapper.then(\n          loadedCss,\n          function(css) {\n            expect(css).toEqual('@media (min-width: 700px) and (orientation: landscape) {\\n.one {}\\n}\\n');\n            done();\n          },\n          function(e) {\n            throw 'fail;'\n          }\n        );\n      });\n    });\n\n    describe('url rewritting', () => {\n      it('should rewrite url in inlined content', (done) => {\n        // it should rewrite both '@import' and 'url()'\n        xhr.reply('http://base/one.css', '@import \"./nested/two.css\";.one {background-image: url(\"one.jpg\");}');\n        xhr.reply('http://base/nested/two.css', '.two {background-image: url(\"../img/two.jpg\");}');\n        var css = '@import \"one.css\";'\n        var loadedCss = inliner.inlineImports(css, 'http://base/');\n        expect(loadedCss).toBePromise();\n        PromiseWrapper.then(\n          loadedCss,\n          function(css) {\n            expect(css).toEqual(\n              \".two {background-image: url('http://base/img/two.jpg');}\\n\" +\n              \".one {background-image: url('http://base/one.jpg');}\\n\"\n            );\n            done();\n          },\n          function(e) {\n            throw 'fail;'\n          }\n        );\n      });\n    });\n  });\n}\n\nclass FakeXHR extends XHR {\n  _responses: Map;\n\n  constructor() {\n    super();\n    this._responses = MapWrapper.create();\n  }\n\n  get(url: string): Promise<string> {\n    var response = MapWrapper.get(this._responses, url);\n    if (isBlank(response)) {\n      return PromiseWrapper.reject('xhr error');\n    }\n\n    return PromiseWrapper.resolve(response);\n  }\n\n  reply(url: string, response: string) {\n    MapWrapper.set(this._responses, url, response);\n  }\n}\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","var $__placeholder__0 = $__placeholder__1","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","assert.argumentTypes($__placeholder__0)","assert.type.$__placeholder__0)","return assert.returnType(($__placeholder__0), $__placeholder__1)","assert.genericType($__placeholder__0)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});"]}