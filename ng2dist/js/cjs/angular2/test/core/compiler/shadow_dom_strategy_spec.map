{"version":3,"sources":["shadow_dom_strategy_spec.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/25","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/14"],"names":[],"mappings":"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","file":"/Users/crush/Documents/learning_js/angular/modules/angular2/test/core/compiler/shadow_dom_strategy_spec.js","sourceRoot":"/Users/crush/Documents/learning_js/angular/modules/angular2/test/core/compiler/","sourcesContent":["import {describe, beforeEach, it, expect, ddescribe, iit, SpyObject, el} from 'angular2/test_lib';\n\nimport {\n  NativeShadowDomStrategy,\n  EmulatedScopedShadowDomStrategy,\n  EmulatedUnscopedShadowDomStrategy,\n  resetShadowDomCache,\n} from 'angular2/src/core/compiler/shadow_dom_strategy';\nimport {UrlResolver} from 'angular2/src/core/compiler/url_resolver';\nimport {StyleUrlResolver} from 'angular2/src/core/compiler/style_url_resolver';\nimport {StyleInliner} from 'angular2/src/core/compiler/style_inliner';\nimport {ProtoView} from 'angular2/src/core/compiler/view';\nimport {DirectiveMetadata} from 'angular2/src/core/compiler/directive_metadata';\n\nimport {CompileElement} from 'angular2/src/core/compiler/pipeline/compile_element';\n\nimport {XHR} from 'angular2/src/core/compiler/xhr/xhr';\n\nimport {isPresent, isBlank} from 'angular2/src/facade/lang';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {Map, MapWrapper} from 'angular2/src/facade/collection';\nimport {PromiseWrapper, Promise} from 'angular2/src/facade/async';\n\nimport {DynamicProtoChangeDetector} from 'angular2/change_detection';\n\nexport function main() {\n  var strategy;\n\n  describe('NativeShadowDomStratgey', () => {\n    beforeEach(() => {\n      var urlResolver = new UrlResolver();\n      var styleUrlResolver = new StyleUrlResolver(urlResolver);\n      strategy = new NativeShadowDomStrategy(styleUrlResolver);\n    });\n\n    it('should attach the view nodes to the shadow root', () => {\n      var host = el('<div></div>');\n      var nodes = el('<div>view</div>');\n      var pv = new ProtoView(nodes, new DynamicProtoChangeDetector(null), null);\n      var view = pv.instantiate(null, null, null);\n\n      strategy.attachTemplate(host, view);\n      var shadowRoot = DOM.getShadowRoot(host);\n      expect(isPresent(shadowRoot)).toBeTruthy();\n      expect(shadowRoot).toHaveText('view');\n    });\n\n    it('should should not transform template elements', () => {\n      expect(strategy.getTemplateCompileStep(null)).toBe(null);\n    });\n\n    it('should rewrite style urls', () => {\n      var step = strategy.getStyleCompileStep(null, 'http://base');\n      var styleElement = DOM.createStyleElement('.one {background-image: url(\"img.jpg\");}');\n      var compileElement = new CompileElement(styleElement);\n      step.process(null, compileElement, null);\n      expect(styleElement).toHaveText(\".one {background-image: url('http://base/img.jpg');}\");\n    });\n\n    it('should not inline import rules', () => {\n      var step = strategy.getStyleCompileStep(null, 'http://base');\n      var styleElement = DOM.createStyleElement('@import \"other.css\";');\n      var compileElement = new CompileElement(styleElement);\n      step.process(null, compileElement, null);\n      expect(styleElement).toHaveText(\"@import 'http://base/other.css';\");\n    });\n  });\n\n  describe('EmulatedScopedShadowDomStratgey', () => {\n    var xhr, styleHost;\n\n    beforeEach(() => {\n      var urlResolver = new UrlResolver();\n      var styleUrlResolver = new StyleUrlResolver(urlResolver);\n      xhr = new FakeXHR();\n      var styleInliner = new StyleInliner(xhr, styleUrlResolver, urlResolver);\n      styleHost = el('<div></div>');\n      strategy = new EmulatedScopedShadowDomStrategy(styleInliner, styleUrlResolver, styleHost);\n      resetShadowDomCache();\n    });\n\n    it('should attach the view nodes as child of the host element', () => {\n      var host = el('<div><span>original content</span></div>');\n      var nodes = el('<div>view</div>');\n      var pv = new ProtoView(nodes, new DynamicProtoChangeDetector(null), null);\n      var view = pv.instantiate(null, null, null);\n\n      strategy.attachTemplate(host, view);\n      var firstChild = DOM.firstChild(host);\n      expect(DOM.tagName(firstChild).toLowerCase()).toEqual('div');\n      expect(firstChild).toHaveText('view');\n      expect(host).toHaveText('view');\n    });\n\n    it('should rewrite style urls', () => {\n      var template = el('<div><style>.foo {background-image: url(\"img.jpg\");}</style></div>');\n      var cmpMetadata = new DirectiveMetadata(SomeComponent, null);\n      var step = strategy.getStyleCompileStep(cmpMetadata, 'http://base');\n      var styleElement = DOM.firstChild(template);\n      var compileElement = new CompileElement(styleElement);\n      step.process(null, compileElement, null);\n      expect(styleElement).toHaveText(\".foo[_ngcontent-0] {\\n\" +\n        \"background-image: url(http://base/img.jpg);\\n\" +\n        \"}\");\n    });\n\n    it('should scope styles', () => {\n      var template = el('<div><style>.foo {} :host {}</style></div>');\n      var cmpMetadata = new DirectiveMetadata(SomeComponent, null);\n      var step = strategy.getStyleCompileStep(cmpMetadata, 'http://base');\n      var styleElement = DOM.firstChild(template);\n      var compileElement = new CompileElement(styleElement);\n      step.process(null, compileElement, null);\n      expect(styleElement).toHaveText(\".foo[_ngcontent-0] {\\n\\n}\\n\\n[_nghost-0] {\\n\\n}\");\n    });\n\n    it('should inline @import rules', (done) => {\n      xhr.reply('http://base/one.css', '.one {}');\n\n      var template = el('<div><style>@import \"one.css\";</style></div>');\n      var cmpMetadata = new DirectiveMetadata(SomeComponent, null);\n      var step = strategy.getStyleCompileStep(cmpMetadata, 'http://base');\n      var styleElement = DOM.firstChild(template);\n      var parentElement = new CompileElement(template);\n      var compileElement = new CompileElement(styleElement);\n      var parentpv = new ProtoView(null, null, null);\n      parentElement.inheritedProtoView = parentpv;\n      step.process(parentElement, compileElement, null);\n\n      expect(parentpv.stylePromises.length).toEqual(1);\n      expect(parentpv.stylePromises[0]).toBePromise();\n\n      expect(styleElement).toHaveText('');\n      parentpv.stylePromises[0].then((_) => {\n        expect(styleElement).toHaveText('.one[_ngcontent-0] {\\n\\n}');\n        done();\n      });\n    });\n\n    it('should return the same style given the same component', () => {\n      var template = el('<div><style>.foo {} :host {}</style></div>');\n      var cmpMetadata = new DirectiveMetadata(SomeComponent, null);\n      var step = strategy.getStyleCompileStep(cmpMetadata, 'http://base');\n      var styleElement = DOM.firstChild(template);\n      var compileElement = new CompileElement(styleElement);\n      step.process(null, compileElement, null);\n\n      var template2 = el('<div><style>.foo {} :host {}</style></div>');\n      var step2 = strategy.getStyleCompileStep(cmpMetadata, 'http://base');\n      var styleElement2 = DOM.firstChild(template2);\n      var compileElement2 = new CompileElement(styleElement2);\n      step2.process(null, compileElement2, null);\n\n      expect(DOM.getText(styleElement)).toEqual(DOM.getText(styleElement2));\n    });\n\n    it('should return different styles given different components', () => {\n      var template = el('<div><style>.foo {} :host {}</style></div>');\n      var cmpMetadata = new DirectiveMetadata(SomeComponent, null);\n      var step = strategy.getStyleCompileStep(cmpMetadata, 'http://base');\n      var styleElement = DOM.firstChild(template);\n      var compileElement = new CompileElement(styleElement);\n      step.process(null, compileElement, null);\n\n      var template2 = el('<div><style>.foo {} :host {}</style></div>');\n      var cmpMetadata2 = new DirectiveMetadata(SomeOtherComponent, null);\n      var step2 = strategy.getStyleCompileStep(cmpMetadata2, 'http://base');\n      var styleElement2 = DOM.firstChild(template2);\n      var compileElement2 = new CompileElement(styleElement2);\n      step2.process(null, compileElement2, null);\n\n      expect(DOM.getText(styleElement)).not.toEqual(DOM.getText(styleElement2));\n    });\n\n    it('should move the style element to the style host', () => {\n      var template = el('<div><style>.one {}</style></div>');\n      var cmpMetadata = new DirectiveMetadata(SomeComponent, null);\n      var step = strategy.getStyleCompileStep(cmpMetadata, 'http://base');\n      var styleElement = DOM.firstChild(template);\n      var compileElement = new CompileElement(styleElement);\n      step.process(null, compileElement, null);\n      expect(template).toHaveText('');\n      expect(styleHost).toHaveText('.one[_ngcontent-0] {\\n\\n}');\n    });\n\n    it('should add an attribute to the content elements', () => {\n      var template = el('<div></div>');\n      var cmpMetadata = new DirectiveMetadata(SomeComponent, null);\n      var step = strategy.getTemplateCompileStep(cmpMetadata);\n      var compileElement = new CompileElement(template);\n      step.process(null, compileElement, null);\n      expect(DOM.getAttribute(template, '_ngcontent-0')).toEqual('');\n    });\n\n    it('should add an attribute to the host elements', () => {\n      var template = el('<div></div>');\n      var cmpMetadata = new DirectiveMetadata(SomeComponent, null);\n      var step = strategy.getTemplateCompileStep(cmpMetadata);\n      var compileElement = new CompileElement(template);\n      compileElement.componentDirective = new DirectiveMetadata(SomeOtherComponent, null);\n      step.process(null, compileElement, null);\n      expect(DOM.getAttribute(template, '_nghost-1')).toEqual('');\n    });\n  });\n\n  describe('EmulatedUnscopedShadowDomStratgey', () => {\n    var styleHost;\n\n    beforeEach(() => {\n      var urlResolver = new UrlResolver();\n      var styleUrlResolver = new StyleUrlResolver(urlResolver);\n      styleHost = el('<div></div>');\n      strategy = new EmulatedUnscopedShadowDomStrategy(styleUrlResolver, styleHost);\n      resetShadowDomCache();\n    });\n\n    it('should attach the view nodes as child of the host element', () => {\n      var host = el('<div><span>original content</span></div>');\n      var nodes = el('<div>view</div>');\n      var pv = new ProtoView(nodes, new DynamicProtoChangeDetector(null), null);\n      var view = pv.instantiate(null, null, null);\n\n      strategy.attachTemplate(host, view);\n      var firstChild = DOM.firstChild(host);\n      expect(DOM.tagName(firstChild).toLowerCase()).toEqual('div');\n      expect(firstChild).toHaveText('view');\n      expect(host).toHaveText('view');\n    });\n\n    it('should rewrite style urls', () => {\n      var template = el('<div><style>.one {background-image: url(\"img.jpg\");}</style></div>')\n      var step = strategy.getStyleCompileStep(null, 'http://base');\n      var styleElement = DOM.firstChild(template);\n      var compileElement = new CompileElement(styleElement);\n      step.process(null, compileElement, null);\n      expect(styleElement).toHaveText(\".one {background-image: url('http://base/img.jpg');}\");\n    });\n\n    it('should not inline import rules', () => {\n      var template = el('<div><style>@import \"other.css\";</style></div>')\n      var step = strategy.getStyleCompileStep(null, 'http://base');\n      var styleElement = DOM.firstChild(template);\n      var compileElement = new CompileElement(styleElement);\n      step.process(null, compileElement, null);\n      expect(styleElement).toHaveText(\"@import 'http://base/other.css';\");\n    });\n\n    it('should move the style element to the style host', () => {\n      var template = el('<div><style>/*css*/</style></div>')\n      var step = strategy.getStyleCompileStep(null, 'http://base');\n      var styleElement = DOM.firstChild(template);\n      var compileElement = new CompileElement(styleElement);\n      step.process(null, compileElement, null);\n      expect(styleHost).toHaveText(\"/*css*/\");\n    });\n\n    it('should insert the same style only once in the style host', () => {\n      var template = el('<div><style>/*css1*/</style><style>/*css2*/</style>' +\n                        '<style>/*css1*/</style></div>')\n      var step = strategy.getStyleCompileStep(null, 'http://base');\n      var styleElements = DOM.childNodes(template);\n      var compileElement = new CompileElement(styleElements[0]);\n      step.process(null, compileElement, null);\n      compileElement = new CompileElement(styleElements[0]);\n      step.process(null, compileElement, null);\n      compileElement = new CompileElement(styleElements[0]);\n      step.process(null, compileElement, null);\n\n      expect(styleHost).toHaveText(\"/*css1*//*css2*/\");\n    });\n  });\n}\n\nclass FakeXHR extends XHR {\n  _responses: Map;\n\n  constructor() {\n    super();\n    this._responses = MapWrapper.create();\n  }\n\n  get(url: string): Promise<string> {\n    var response = MapWrapper.get(this._responses, url);\n    if (isBlank(response)) {\n      return PromiseWrapper.reject('xhr error');\n    }\n\n    return PromiseWrapper.resolve(response);\n  }\n\n  reply(url: string, response: string) {\n    MapWrapper.set(this._responses, url, response);\n  }\n}\n\nclass SomeComponent {}\nclass SomeOtherComponent {}\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})","var $__placeholder__0 = $__placeholder__1","$traceurRuntime.superConstructor($__placeholder__0).call($__placeholder__1)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)","assert.argumentTypes($__placeholder__0)","assert.type.$__placeholder__0)","return assert.returnType(($__placeholder__0), $__placeholder__1)","assert.genericType($__placeholder__0)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)"]}