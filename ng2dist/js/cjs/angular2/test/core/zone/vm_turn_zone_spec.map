{"version":3,"sources":["vm_turn_zone_spec.js","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1"],"names":[],"mappings":"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","file":"/Users/crush/Documents/learning_js/angular/modules/angular2/test/core/zone/vm_turn_zone_spec.js","sourceRoot":"/Users/crush/Documents/learning_js/angular/modules/angular2/test/core/zone/","sourcesContent":["import {describe, ddescribe, it, iit, xit, xdescribe, expect, beforeEach, async, tick} from 'angular2/test_lib';\nimport {Log, once} from 'angular2/test_lib';\nimport {PromiseWrapper} from 'angular2/src/facade/async';\nimport {BaseException} from 'angular2/src/facade/lang';\nimport {VmTurnZone} from 'angular2/src/core/zone/vm_turn_zone';\n\nexport function main() {\n  describe(\"VmTurnZone\", () => {\n    var log, zone;\n\n    beforeEach(() => {\n      log = new Log();\n      zone = new VmTurnZone({enableLongStackTrace: true});\n      zone.initCallbacks({\n        onTurnStart: log.fn('onTurnStart'),\n        onTurnDone: log.fn('onTurnDone')\n      });\n    });\n\n    describe(\"run\", () => {\n      it('should call onTurnStart and onTurnDone', () => {\n        zone.run(log.fn('run'));\n\n        expect(log.result()).toEqual('onTurnStart; run; onTurnDone');\n      });\n\n      it('should return the body return value from run', () => {\n        expect(zone.run(() => 6)).toEqual(6);\n      });\n\n      it('should not run onTurnStart and onTurnDone for nested Zone.run', () => {\n        zone.run(() => {\n          zone.run(log.fn('run'));\n        });\n        expect(log.result()).toEqual('onTurnStart; run; onTurnDone');\n      });\n\n\n      it('should call onTurnStart and onTurnDone before and after each top-level run', () => {\n        zone.run(log.fn('run1'));\n        zone.run(log.fn('run2'));\n\n        expect(log.result()).toEqual('onTurnStart; run1; onTurnDone; onTurnStart; run2; onTurnDone');\n      });\n\n\n      it('should call onTurnStart and onTurnDone before and after each turn', (done) => {\n        var a = PromiseWrapper.completer();\n        var b = PromiseWrapper.completer();\n\n        zone.run(() => {\n          log.add('run start');\n          a.promise.then((_) => log.add('a then'));\n          b.promise.then((_) => log.add('b then'));\n        });\n\n        a.resolve(\"a\");\n        b.resolve(\"b\");\n\n        PromiseWrapper.all([a.promise, b.promise]).then((_) => {\n          expect(log.result()).toEqual('onTurnStart; run start; onTurnDone; onTurnStart; a then; onTurnDone; onTurnStart; b then; onTurnDone');\n          done();\n        });\n      });\n    });\n\n    describe(\"runOutsideAngular\", () => {\n      it(\"should run a function outside of the angular zone\", () => {\n        zone.runOutsideAngular(log.fn('run'));\n\n        expect(log.result()).toEqual('run');\n      });\n    });\n\n    describe(\"exceptions\", () => {\n      var trace, exception, saveStackTrace;\n      beforeEach(() => {\n        trace = null;\n        exception = null;\n        saveStackTrace = (e, t) => {\n          exception = e;\n          trace = t;\n        };\n      });\n\n      it('should call the on error callback when it is defined', () => {\n        zone.initCallbacks({onErrorHandler: saveStackTrace});\n\n        zone.run(() => {\n          throw new BaseException('aaa');\n        });\n\n        expect(exception).toBeDefined();\n      });\n\n      it('should rethrow exceptions from the body when no callback defined', () => {\n        expect(() => {\n          zone.run(() => {\n            throw new BaseException('bbb');\n          });\n        }).toThrowError('bbb');\n      });\n\n      it('should produce long stack traces', (done) => {\n        zone.initCallbacks({onErrorHandler: saveStackTrace});\n\n        var c = PromiseWrapper.completer();\n\n        zone.run(function () {\n          PromiseWrapper.setTimeout(function () {\n            PromiseWrapper.setTimeout(function () {\n              c.resolve(null);\n              throw new BaseException('ccc');\n            }, 0);\n          }, 0);\n        });\n\n        c.promise.then((_) => {\n          // then number of traces for JS and Dart is different\n          expect(trace.length).toBeGreaterThan(1);\n          done();\n        });\n      });\n\n      it('should produce long stack traces (when using promises)', (done) => {\n        zone.initCallbacks({onErrorHandler: saveStackTrace});\n\n        var c = PromiseWrapper.completer();\n\n        zone.run(function () {\n          PromiseWrapper.resolve(null).then((_) => {\n            return PromiseWrapper.resolve(null).then((__) => {\n              c.resolve(null);\n              throw new BaseException(\"ddd\");\n            });\n          });\n        });\n\n        c.promise.then((_) => {\n          // then number of traces for JS and Dart is different\n          expect(trace.length).toBeGreaterThan(1);\n          done();\n        });\n      });\n\n      it('should disable long stack traces', (done) => {\n        var zone = new VmTurnZone({enableLongStackTrace: false});\n        zone.initCallbacks({onErrorHandler: saveStackTrace});\n\n        var c = PromiseWrapper.completer();\n\n        zone.run(function () {\n          PromiseWrapper.setTimeout(function () {\n            PromiseWrapper.setTimeout(function () {\n              c.resolve(null);\n              throw new BaseException('ccc');\n            }, 0);\n          }, 0);\n        });\n\n        c.promise.then((_) => {\n          expect(trace.length).toEqual(1);\n          done();\n        });\n      });\n    });\n  });\n}\n","Object.defineProperties(module.exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var __moduleName = $__placeholder__0;","($__placeholder__0 = require($__placeholder__1),\n        $__placeholder__2 && $__placeholder__3.__esModule && $__placeholder__4 || {default: $__placeholder__5})"]}